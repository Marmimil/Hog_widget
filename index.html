<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hogwarts Widget</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Cinzel', serif;
    }
    
    body {
      background: 
        repeating-linear-gradient(
          93deg,
          transparent 0px,
          transparent 1px,
          rgba(139,115,85,0.08) 1px,
          rgba(139,115,85,0.08) 2px,
          transparent 2px,
          transparent 6px
        ),
        repeating-linear-gradient(
          88deg,
          transparent 0px,
          rgba(160,140,110,0.1) 15px,
          transparent 30px
        ),
        repeating-linear-gradient(
          91deg,
          rgba(180,160,130,0.12) 0px,
          transparent 2px,
          rgba(150,130,100,0.08) 4px,
          transparent 10px
        ),
        linear-gradient(175deg, 
          #d9ccb4 0%, 
          #cfc2a8 15%,
          #d5c8b0 30%,
          #c9bca4 50%,
          #d2c5ad 70%,
          #c6b99f 85%,
          #cbbea6 100%
        );
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 15px;
    }
    
    .container {
      display: flex;
      gap: 20px;
      align-items: center;
      width: 100%;
      max-width: 450px;
    }
    
    .mode-tabs {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .tab {
      background: 
        linear-gradient(180deg, rgba(109,90,69,0.3) 0%, rgba(92,74,56,0.4) 100%);
      border: 1px solid #6d5a45;
      color: #4a3525;
      padding: 10px 14px;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      font-size: 0.75em;
      border-radius: 5px;
      transition: all 0.3s;
      font-weight: 600;
      white-space: nowrap;
    }
    
    .tab:hover {
      background: linear-gradient(180deg, rgba(30,80,50,0.25) 0%, rgba(26,71,42,0.35) 100%);
      border-color: #1e5032;
      color: #1a472a;
    }
    
    .tab.active {
      background: 
        repeating-linear-gradient(
          90deg,
          rgba(30,80,50,0.9) 0px,
          rgba(42,98,61,0.9) 1px,
          rgba(26,71,42,0.95) 2px
        ),
        linear-gradient(180deg, #1e5032 0%, #1a472a 100%);
      border-color: #8b7355;
      color: #c9bda3;
      box-shadow: inset 1px 1px 3px rgba(0,0,0,0.3);
    }
    
    .panel-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 140px;
    }
    
    .display {
      font-size: 2.8em;
      color: #3d2b1f;
      font-weight: 700;
      letter-spacing: 2px;
    }
    
    .controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 12px;
    }
    
    .btn {
      background: 
        repeating-linear-gradient(
          92deg,
          rgba(139,115,85,0.9) 0px,
          rgba(109,90,69,0.95) 1px,
          rgba(92,64,51,0.9) 2px
        ),
        linear-gradient(180deg, #7d654d 0%, #5c4a38 100%);
      border: 1px solid #4a3525;
      color: #f0e8d8;
      padding: 8px 18px;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      font-size: 0.8em;
      border-radius: 5px;
      transition: all 0.3s;
      font-weight: 600;
    }
    
    .btn:hover {
      background: 
        repeating-linear-gradient(
          90deg,
          rgba(30,80,50,0.9) 0px,
          rgba(42,98,61,0.9) 1px,
          rgba(26,71,42,0.95) 2px
        ),
        linear-gradient(180deg, #1e5032 0%, #1a472a 100%);
      border-color: #0d2818;
    }
    
    .pomodoro-info {
      color: #4a3525;
      font-size: 0.8em;
      margin-top: 10px;
    }
    
    .pomodoro-info span {
      color: #1a472a;
      font-weight: 700;
    }
    
    .mode-panel { display: none; }
    .mode-panel.active { display: flex; flex-direction: column; align-items: center; }
  </style>
</head>
<body>
  <div class="container">
    <div class="mode-tabs">
      <button class="tab active" onclick="switchMode('clock')">Clock</button>
      <button class="tab" onclick="switchMode('pomodoro')">Pomodoro</button>
      <button class="tab" onclick="switchMode('stopwatch')">Stopwatch</button>
    </div>
    
    <div class="panel-area">
      <div id="clock-panel" class="mode-panel active">
        <div class="display" id="clock-display">00:00:00</div>
      </div>
      
      <div id="pomodoro-panel" class="mode-panel">
        <div class="display" id="pomodoro-display">25:00</div>
        <div class="controls">
          <button class="btn" id="pomo-start" onclick="startPomodoro()">Start</button>
          <button class="btn" onclick="resetPomodoro()">Reset</button>
        </div>
        <div class="pomodoro-info">
          Session: <span id="pomo-session">Work</span> | Count: <span id="pomo-count">0</span>
        </div>
      </div>
      
      <div id="stopwatch-panel" class="mode-panel">
        <div class="display" id="stopwatch-display">00:00:00</div>
        <div class="controls">
          <button class="btn" id="sw-start" onclick="toggleStopwatch()">Start</button>
          <button class="btn" onclick="resetStopwatch()">Reset</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function switchMode(mode) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.mode-panel').forEach(p => p.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById(mode + '-panel').classList.add('active');
    }
    
    function updateClock() {
      document.getElementById('clock-display').textContent = new Date().toTimeString().split(' ')[0];
    }
    setInterval(updateClock, 1000);
    updateClock();
    
    let pomoTime = 25 * 60, pomoInterval = null, pomoRunning = false, isWork = true, pomoCount = 0;
    
    function updatePomoDisplay() {
      const m = Math.floor(pomoTime / 60).toString().padStart(2, '0');
      const s = (pomoTime % 60).toString().padStart(2, '0');
      document.getElementById('pomodoro-display').textContent = `${m}:${s}`;
    }
    
    function startPomodoro() {
      if (pomoRunning) {
        clearInterval(pomoInterval);
        document.getElementById('pomo-start').textContent = 'Start';
      } else {
        pomoInterval = setInterval(() => {
          pomoTime--;
          updatePomoDisplay();
          if (pomoTime <= 0) {
            clearInterval(pomoInterval);
            pomoCount += isWork ? 1 : 0;
            document.getElementById('pomo-count').textContent = pomoCount;
            pomoTime = isWork ? 5 * 60 : 25 * 60;
            isWork = !isWork;
            document.getElementById('pomo-session').textContent = isWork ? 'Work' : 'Break';
            updatePomoDisplay();
            pomoRunning = false;
            document.getElementById('pomo-start').textContent = 'Start';
          }
        }, 1000);
        document.getElementById('pomo-start').textContent = 'Pause';
      }
      pomoRunning = !pomoRunning;
    }
    
    function resetPomodoro() {
      clearInterval(pomoInterval);
      pomoRunning = false;
      isWork = true;
      pomoTime = 25 * 60;
      updatePomoDisplay();
      document.getElementById('pomo-start').textContent = 'Start';
      document.getElementById('pomo-session').textContent = 'Work';
    }
    
    let swTime = 0, swInterval = null, swRunning = false;
    
    function updateSwDisplay() {
      const h = Math.floor(swTime / 3600).toString().padStart(2, '0');
      const m = Math.floor((swTime % 3600) / 60).toString().padStart(2, '0');
      const s = (swTime % 60).toString().padStart(2, '0');
      document.getElementById('stopwatch-display').textContent = `${h}:${m}:${s}`;
    }
    
    function toggleStopwatch() {
      if (swRunning) {
        clearInterval(swInterval);
        document.getElementById('sw-start').textContent = 'Start';
      } else {
        swInterval = setInterval(() => { swTime++; updateSwDisplay(); }, 1000);
        document.getElementById('sw-start').textContent = 'Pause';
      }
      swRunning = !swRunning;
    }
    
    function resetStopwatch() {
      clearInterval(swInterval);
      swRunning = false;
      swTime = 0;
      updateSwDisplay();
      document.getElementById('sw-start').textContent = 'Start';
    }
  </script>
</body>
</html>

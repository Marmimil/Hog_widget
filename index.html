<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hogwarts Widget</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Cinzel', serif;
      background: linear-gradient(145deg, #3d2b1f 0%, #5c4033 50%, #4a3728 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    
    .wood-texture {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0.1;
      background-image: 
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 2px,
          rgba(0,0,0,0.03) 2px,
          rgba(0,0,0,0.03) 4px
        );
    }
    
    .container {
      text-align: center;
      padding: 40px 50px;
      background: linear-gradient(145deg, #d4c4a8 0%, #c4b393 50%, #b8a882 100%);
      border-radius: 15px;
      border: 3px solid #8b7355;
      box-shadow: 
        0 8px 32px rgba(0,0,0,0.4),
        inset 0 2px 4px rgba(255,255,255,0.2),
        inset 0 -2px 4px rgba(0,0,0,0.1);
      position: relative;
      min-width: 320px;
    }
    
    .container::before {
      content: "";
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      bottom: 10px;
      border: 1px solid rgba(139, 115, 85, 0.3);
      border-radius: 10px;
      pointer-events: none;
    }
    
    .mode-tabs {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 30px;
    }
    
    .tab {
      background: rgba(139, 115, 85, 0.2);
      border: 1px solid #8b7355;
      color: #5c4033;
      padding: 10px 20px;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      font-size: 0.85em;
      border-radius: 6px;
      transition: all 0.3s;
      font-weight: 600;
    }
    
    .tab:hover {
      background: rgba(30, 80, 50, 0.15);
      border-color: #1e5032;
      color: #1e5032;
    }
    
    .tab.active {
      background: linear-gradient(135deg, #1e5032 0%, #2a623d 50%, #1a472a 100%);
      border-color: #aaa78c;
      color: #aaa78c;
      box-shadow: 0 4px 12px rgba(30, 80, 50, 0.4);
    }
    
    .display {
      font-size: 3.5em;
      color: #3d2b1f;
      text-shadow: 1px 1px 2px rgba(255,255,255,0.3);
      margin: 20px 0;
      font-weight: 700;
      letter-spacing: 2px;
    }
    
    .controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    
    .btn {
      background: linear-gradient(145deg, #8b7355 0%, #6d5a45 100%);
      border: 1px solid #5c4033;
      color: #f5f0e6;
      padding: 12px 28px;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      font-size: 0.9em;
      border-radius: 8px;
      transition: all 0.3s;
      font-weight: 600;
    }
    
    .btn:hover {
      background: linear-gradient(135deg, #1e5032 0%, #2a623d 100%);
      border-color: #1a472a;
      box-shadow: 0 4px 15px rgba(30, 80, 50, 0.4);
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .pomodoro-info {
      color: #5c4033;
      font-size: 0.9em;
      margin-top: 15px;
    }
    
    .pomodoro-info span {
      color: #1e5032;
      font-weight: 700;
    }
    
    .mode-panel { display: none; }
    .mode-panel.active { display: block; }
  </style>
</head>
<body>
  <div class="wood-texture"></div>
  
  <div class="container">
    <div class="mode-tabs">
      <button class="tab active" onclick="switchMode('clock')">Clock</button>
      <button class="tab" onclick="switchMode('pomodoro')">Pomodoro</button>
      <button class="tab" onclick="switchMode('stopwatch')">Stopwatch</button>
    </div>
    
    <!-- Clock Mode -->
    <div id="clock-panel" class="mode-panel active">
      <div class="display" id="clock-display">00:00:00</div>
    </div>
    
    <!-- Pomodoro Mode -->
    <div id="pomodoro-panel" class="mode-panel">
      <div class="display" id="pomodoro-display">25:00</div>
      <div class="controls">
        <button class="btn" id="pomo-start" onclick="startPomodoro()">Start</button>
        <button class="btn" onclick="resetPomodoro()">Reset</button>
      </div>
      <div class="pomodoro-info">
        Session: <span id="pomo-session">Work</span> | Count: <span id="pomo-count">0</span>
      </div>
    </div>
    
    <!-- Stopwatch Mode -->
    <div id="stopwatch-panel" class="mode-panel">
      <div class="display" id="stopwatch-display">00:00:00</div>
      <div class="controls">
        <button class="btn" id="sw-start" onclick="toggleStopwatch()">Start</button>
        <button class="btn" onclick="resetStopwatch()">Reset</button>
      </div>
    </div>
  </div>

  <script>
    // Mode Switching
    function switchMode(mode) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.mode-panel').forEach(p => p.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById(mode + '-panel').classList.add('active');
    }
    
    // Clock
    function updateClock() {
      const now = new Date();
      const time = now.toTimeString().split(' ')[0];
      document.getElementById('clock-display').textContent = time;
    }
    setInterval(updateClock, 1000);
    updateClock();
    
    // Pomodoro
    let pomoTime = 25 * 60;
    let pomoInterval = null;
    let pomoRunning = false;
    let isWork = true;
    let pomoCount = 0;
    
    function updatePomoDisplay() {
      const mins = Math.floor(pomoTime / 60).toString().padStart(2, '0');
      const secs = (pomoTime % 60).toString().padStart(2, '0');
      document.getElementById('pomodoro-display').textContent = `${mins}:${secs}`;
    }
    
    function startPomodoro() {
      if (pomoRunning) {
        clearInterval(pomoInterval);
        document.getElementById('pomo-start').textContent = 'Start';
      } else {
        pomoInterval = setInterval(() => {
          pomoTime--;
          updatePomoDisplay();
          if (pomoTime <= 0) {
            clearInterval(pomoInterval);
            if (isWork) {
              pomoCount++;
              document.getElementById('pomo-count').textContent = pomoCount;
              pomoTime = 5 * 60;
              isWork = false;
              document.getElementById('pomo-session').textContent = 'Break';
            } else {
              pomoTime = 25 * 60;
              isWork = true;
              document.getElementById('pomo-session').textContent = 'Work';
            }
            updatePomoDisplay();
            pomoRunning = false;
            document.getElementById('pomo-start').textContent = 'Start';
            new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdH2Onp6agHBkXGR2h5eem4x7bmZlbHqHj5KRi4F5c3BxeIGHioqHgXt3dXZ5fYGEhYSDgH17e3t8foCCg4OCgYB/fn19fn+AgYKCgoGAf39+fn5/gIGBgYGAgH9/f39/gICAgICAgIB/f39/f4CAgICAgICAf39/f3+AgICAgICAgH9/f39/gICAgA==').play().catch(()=>{});
          }
        }, 1000);
        document.getElementById('pomo-start').textContent = 'Pause';
      }
      pomoRunning = !pomoRunning;
    }
    
    function resetPomodoro() {
      clearInterval(pomoInterval);
      pomoRunning = false;
      isWork = true;
      pomoTime = 25 * 60;
      updatePomoDisplay();
      document.getElementById('pomo-start').textContent = 'Start';
      document.getElementById('pomo-session').textContent = 'Work';
    }
    
    // Stopwatch
    let swTime = 0;
    let swInterval = null;
    let swRunning = false;
    
    function updateSwDisplay() {
      const hrs = Math.floor(swTime / 3600).toString().padStart(2, '0');
      const mins = Math.floor((swTime % 3600) / 60).toString().padStart(2, '0');
      const secs = (swTime % 60).toString().padStart(2, '0');
      document.getElementById('stopwatch-display').textContent = `${hrs}:${mins}:${secs}`;
    }
    
    function toggleStopwatch() {
      if (swRunning) {
        clearInterval(swInterval);
        document.getElementById('sw-start').textContent = 'Start';
      } else {
        swInterval = setInterval(() => {
          swTime++;
          updateSwDisplay();
        }, 1000);
        document.getElementById('sw-start').textContent = 'Pause';
      }
      swRunning = !swRunning;
    }
    
    function resetStopwatch() {
      clearInterval(swInterval);
      swRunning = false;
      swTime = 0;
      updateSwDisplay();
      document.getElementById('sw-start').textContent = 'Start';
    }
  </script>
</body>
</html>
